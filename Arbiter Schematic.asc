Version 4
SHEET 1 2140 1172
WIRE 48 48 16 48
WIRE 304 48 272 48
WIRE 16 64 16 48
WIRE 48 112 -64 112
WIRE -128 176 -224 176
WIRE 48 176 -128 176
WIRE 432 176 272 176
WIRE -128 208 -128 176
WIRE 48 240 32 240
WIRE 288 240 272 240
WIRE 400 240 352 240
WIRE 400 256 400 240
WIRE -128 320 -128 288
WIRE -64 320 -64 112
WIRE -64 320 -128 320
WIRE 432 320 432 176
WIRE 432 320 -64 320
WIRE 432 352 432 320
WIRE -224 368 -224 176
WIRE -176 368 -224 368
WIRE -224 400 -224 368
WIRE 96 400 -224 400
WIRE 96 512 96 400
WIRE 800 624 800 608
WIRE 0 656 -16 656
WIRE 96 656 96 592
WIRE 96 656 64 656
WIRE 128 656 96 656
WIRE 208 656 192 656
WIRE 800 704 800 688
WIRE 816 704 800 704
WIRE 928 704 896 704
WIRE 960 704 928 704
WIRE 1184 752 1024 752
WIRE -80 784 -80 704
WIRE 272 784 272 704
WIRE 1024 784 1024 752
WIRE 928 816 928 704
WIRE 928 816 800 816
WIRE 800 848 800 816
WIRE 1184 848 1184 752
WIRE 896 880 864 880
WIRE 1024 880 1024 848
WIRE 1024 880 976 880
WIRE 864 928 864 880
WIRE 864 928 848 928
WIRE 1024 928 1024 880
WIRE 864 944 864 928
WIRE 800 1056 800 944
WIRE 864 1056 864 1024
WIRE 864 1056 800 1056
WIRE 1024 1056 1024 1008
WIRE 1024 1056 864 1056
WIRE 1184 1056 1184 912
WIRE 1184 1056 1024 1056
WIRE 1024 1088 1024 1056
FLAG 16 64 0
FLAG 432 416 0
FLAG 32 240 VCC
IOPIN 32 240 In
FLAG 304 48 VCC
IOPIN 304 48 In
FLAG 400 256 0
FLAG -176 368 OUTPUT_PULSE
IOPIN -176 368 Out
FLAG -80 608 VCC
IOPIN -80 608 In
FLAG 272 608 VCC
IOPIN 272 608 In
FLAG 1024 656 VCC
IOPIN 1024 656 In
FLAG 1024 1088 0
FLAG 800 608 VCC
IOPIN 800 608 In
FLAG 272 784 LED_CIRCUIT
IOPIN 272 784 Out
FLAG -80 784 LED_CIRCUIT
IOPIN -80 784 Out
SYMBOL cap 288 256 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C1
SYMATTR Value 10 E-9
SYMBOL cap 416 352 R0
SYMATTR InstName C2
SYMATTR Value 47 E-6
SYMBOL res -112 304 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value 9 860
SYMBOL Misc\\NE555 160 144 R0
SYMATTR InstName U1
SYMBOL Misc\\jumper 32 592 R0
SYMATTR InstName SWITCH
SYMBOL res 80 496 R0
SYMATTR InstName R2
SYMATTR Value 100 000
SYMBOL Misc\\jumper 160 592 R0
SYMATTR InstName SWITCH
SYMBOL npn 208 608 R0
SYMATTR InstName Q3
SYMBOL npn -16 608 M0
SYMATTR InstName Q4
SYMBOL npn 960 656 R0
SYMATTR InstName PWR_TRANS
SYMBOL LED 1008 784 R0
SYMATTR InstName D3
SYMBOL res 800 688 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 2000
SYMBOL nmos 848 848 M0
SYMATTR InstName M2
SYMBOL res 848 1040 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 5000
SYMBOL Misc\\xvaristor 992 864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName U2
SYMATTR Value varistor 10K
SYMBOL res 1008 912 R0
SYMATTR InstName PWR_RES
SYMBOL Misc\\jumper 736 656 R270
SYMATTR InstName SWITCH1
SYMBOL cap 1168 848 R0
SYMATTR InstName C3
TEXT 152 -104 Center 2 ;NOTE: DISCHARGE (PIN 7) MUST BE "DISCONNECTED" (OR 'HIGH')\nIN ORDER TO MAINTAIN AN APPROX 50% DUTY CYCLE
TEXT -288 440 Left 3 ;PULSE GENERATION
TEXT -288 488 Left 3 ;LIGHT OUTPUT
TEXT 704 -128 Left 4 ;CURRENT CONTROL CIRCUIT
TEXT 672 -64 Left 2 ;THIS CIRCUIT LIMITS THE CURRENT GOING THROUGH THE LEDS.\nIT WORKS BY RECEIVING A 'HIGH' FROM THE SWITCH, WHICH ALLOWS\nCURRENT TO FLOW THROUGH THE TRANSISTOR TO THE LED(S). THIS\nCURRENT THEN PASSES THROUGH A RESISTOR TO GROUND.\n \nAS CURRENT INCREASES, THE VOLTAGE ACROSS THIS RESISTOR WILL\nALSO INCREASE. THIS IS THE BASIS OF HOW THE CURRENT CONTROL\nWORKS.\n \nCONECTED IN PARALLEL ACROSS THE RESISTOR IS A VOLTAGE DIVIDER\nWITH A MOSFET IN THE MIDDLE. IF THE MOSFET'S GATE THRESHOLD IS\nREACHED (SUFFICIENT CURRENT GOING THROUGH THE POWER RESISTOR,)\nIT WILL ALLOW CURRENT THROUGH IT, PULLING DOWN THE BASE ON THE\nPOWER TRANSISTOR, WHICH CUTS CURRENT TO THE LED.\n \nTHIS DIVIDER CAN BE CONFIGURED BASED ON HOW THE VARISTOR IS SET,\nTHEREBY ALLOWING FINE-TUNING OF THE CURRENT LIMIT.\n \nTHE FUNCTION OF THE CAPACITOR IS TO SMOOTH THIS 'CHOPPY' INPUT\nVOLTAGE/CURRENT ACROSS THE POWER LINE.
TEXT 1288 -152 Left 2 ;ONE OF THESE IS REQUIRED\nPER LED LINE
TEXT 1216 600 Left 2 ;NOTE THAT THE PWR_RES MUST BE CONFIGURED\nFOR EACH LINE AS A VOLTAGE OF 4V MUST BE \nREACHED WHEN THE DESIRED CURRENT CROSSES\nIT TO TRIGGER THE LIMITER.
LINE Normal 528 464 -288 464 2
LINE Normal 624 -160 624 1168 2
LINE Normal 624 464 528 464 2
